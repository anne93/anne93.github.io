<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>大型网站技术架构 | 粽小喵</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="全书结构写在前面
作为一个技术小白，在我读到此书之前对于网站架构几乎一无所知。以前以为产品经理做好功能、界面就是本职所在，然而缺乏对产品性能思考的产品经理绝做不成现象级的产品。
技术的短板必须要弥补，宁可一思进，莫在一思停。
框架结构

《大型网站技术架构：核心原理与案例分析》行文结构
大型网站架构演化1.大型网站软件系统的特点

高并发，大流量
高可用：7*24小时不间断服务
海量数据：储存、管">
<meta property="og:type" content="article">
<meta property="og:title" content="大型网站技术架构">
<meta property="og:url" content="http://zongxiaomiao.com/2016/01/13/大型网站技术架构/index.html">
<meta property="og:site_name" content="粽小喵">
<meta property="og:description" content="全书结构写在前面
作为一个技术小白，在我读到此书之前对于网站架构几乎一无所知。以前以为产品经理做好功能、界面就是本职所在，然而缺乏对产品性能思考的产品经理绝做不成现象级的产品。
技术的短板必须要弥补，宁可一思进，莫在一思停。
框架结构

《大型网站技术架构：核心原理与案例分析》行文结构
大型网站架构演化1.大型网站软件系统的特点

高并发，大流量
高可用：7*24小时不间断服务
海量数据：储存、管">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwoEiasDUibBwQt9ibrP89tLffQEgSia2hJhdc90yPRdfyPHe20otf0FQLfQ/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwP6R3JibqULUSRicLGylkXWh83sH1Lv2yxE9UhFXgMCdibUkJWkY9UHEqQ/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotw3EwcoutibfbbFeD2wRbVdDt5X8UrLkApUTseUuBCdZRaASicmN91fvEg/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwtHCwqtAAW4ia2Oia6dGlHfXdSoBOYJia6HT48sqTMASticuqewBb71u2qw/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwIVmyjW85b6WwN0MEDFetmsRWb2D5ibnPSmvhsdNY4esdgVRibR5icKjAA/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwrsZtn3K1Niaqo4tntAX2BIkUZbpXia1CJKfzDSIL1ngK0VVt2Tnoxh3Q/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwJ3XqoLQn8b4HQsA2JDajZ0nIGbBle92ciaIvgiaPtus9q6tYHr0tKa4g/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwBSDVNotVDNgdiaWNnu6vtp0gicoP9scrXI3YLIa9KVmLdj8YMJ2g0xHw/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwkzO07HIZ0uiau1Y2ELr95ga9f7l5zfMYLGLiaVqfvElchwQCEJiaJ4B2g/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwes8HEBy7ZrsRPRxttqNL1E21aPicM1cLhA3e4uaUmbLY6OIMuHAmYQQ/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwt96jQW12QMUydS24gA3Hia2lrGVc1zqToweia4KFc5OkVPicR66ObdGFw/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotw8ePbeiaceY2UhicBzdSdOichia3BEKM1Ibsg7C3Q1fLiafUekYBickaaBYKw/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwu6GGpzDDib2nh0mWraSXXWwibU6LFeHnuJPKNTNfzJhMokp2wwq26J8g/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwb1kbKzmDYiaIjTvt3ZTfYuJa57KkMhzFmQtHAnAeCB5icf8fljMosNUQ/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwribb7YbQH3CdyS0fNeyMZv48UlwMjzG3icsicPEmIW4sXicCTFT6ibK9ghQ/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotww8QDWS1FNIrKQEA40eDb1QyWib53d9rS3Z1kGIq19LaMZTwQSoPuubg/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwxx1cyFf9b2Wl29KNegPk26t9uzzvDic029tDSUJoOkbvOdbfDXmcA7g/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwBwMUHLg090ww6SgnHWPCMWCOgVBZ2ia0U5uBEpwLD2AX5zLznExUkWA/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwjbTzMMVUiaibLic2WQHd8BGTY74x2y3wZ3k1jTzQAPevDz3QAyxFlIjSQ/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwGwGZT6Wa2Mek2gnlm50WNsB87U98l7JHVQ1M1ia2zjHzcY20K4IqXiag/0?wx_fmt=png">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Rh2wpYzr0Ps67raurD9PyPcTQvsq5TX3sGKf1iaX7rogBAqbHrqpnlEdU9gCPvVCYib3ic43PDYr6FicQ/0?wx_fmt=jpeg">
<meta property="og:updated_time" content="2016-01-13T13:32:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="大型网站技术架构">
<meta name="twitter:description" content="全书结构写在前面
作为一个技术小白，在我读到此书之前对于网站架构几乎一无所知。以前以为产品经理做好功能、界面就是本职所在，然而缺乏对产品性能思考的产品经理绝做不成现象级的产品。
技术的短板必须要弥补，宁可一思进，莫在一思停。
框架结构

《大型网站技术架构：核心原理与案例分析》行文结构
大型网站架构演化1.大型网站软件系统的特点

高并发，大流量
高可用：7*24小时不间断服务
海量数据：储存、管">
  
    <link rel="alternative" href="/atom.xml" title="粽小喵" type="application/atom+xml">
  
  
    <link rel="icon" href="/icon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  

  <script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "//hm.baidu.com/hm.js?c6aef175a75217d13a1390ac73184fca";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
  </script>

</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/apple-touch-icon.png" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">粽小喵</a></h1>
        </hgroup>

        
        <p class="header-subtitle">产品经理|专栏作者|猫奴</p>
        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/anne93/anne93.github.io" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Axure/" style="font-size: 16.67px;">Axure</a> <a href="/tags/PM/" style="font-size: 13.33px;">PM</a> <a href="/tags/Sketch/" style="font-size: 13.33px;">Sketch</a> <a href="/tags/UML/" style="font-size: 10px;">UML</a> <a href="/tags/产品/" style="font-size: 20px;">产品</a> <a href="/tags/体验/" style="font-size: 10px;">体验</a> <a href="/tags/原型/" style="font-size: 20px;">原型</a> <a href="/tags/商业/" style="font-size: 10px;">商业</a> <a href="/tags/工具/" style="font-size: 16.67px;">工具</a> <a href="/tags/广告/" style="font-size: 10px;">广告</a> <a href="/tags/技术/" style="font-size: 13.33px;">技术</a> <a href="/tags/推荐系统/" style="font-size: 10px;">推荐系统</a> <a href="/tags/架构/" style="font-size: 10px;">架构</a> <a href="/tags/社交/" style="font-size: 10px;">社交</a> <a href="/tags/设计/" style="font-size: 10px;">设计</a> <a href="/tags/转型/" style="font-size: 10px;">转型</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a> <a href="/tags/需求/" style="font-size: 13.33px;">需求</a> <a href="/tags/面经/" style="font-size: 10px;">面经</a> <a href="/tags/香港/" style="font-size: 10px;">香港</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.woshipm.com/author/tutti93">人人都是产品经理</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.jianshu.com/users/e0695d7614af/latest_articles">简书专栏</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.mojiax.com/user?uid=%E7%B2%BD%E5%B0%8F%E5%96%B5">墨加专栏</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注产品，偶尔文艺。</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">粽小喵</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img lazy-src="/img/apple-touch-icon.png" class="js-avatar">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">粽小喵</a></h1>
            </hgroup>
            
            <p class="header-subtitle">产品经理|专栏作者|猫奴</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/anne93/anne93.github.io" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-大型网站技术架构" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/13/大型网站技术架构/" class="article-date">
      <time datetime="2016-01-13T13:17:44.000Z" itemprop="datePublished">2016-01-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      大型网站技术架构
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/读书有疑/">读书有疑</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术/">技术</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/架构/">架构</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="u5168_u4E66_u7ED3_u6784"><a href="#u5168_u4E66_u7ED3_u6784" class="headerlink" title="全书结构"></a>全书结构</h1><p><strong>写在前面</strong></p>
<p>作为一个技术小白，在我读到此书之前对于网站架构几乎一无所知。以前以为产品经理做好功能、界面就是本职所在，然而缺乏对产品性能思考的产品经理绝做不成现象级的产品。</p>
<p>技术的短板必须要弥补，宁可一思进，莫在一思停。</p>
<p><strong>框架结构</strong></p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwoEiasDUibBwQt9ibrP89tLffQEgSia2hJhdc90yPRdfyPHe20otf0FQLfQ/0?wx_fmt=png" alt=""></p>
<p><em>《大型网站技术架构：核心原理与案例分析》行文结构</em></p>
<h1 id="u5927_u578B_u7F51_u7AD9_u67B6_u6784_u6F14_u5316"><a href="#u5927_u578B_u7F51_u7AD9_u67B6_u6784_u6F14_u5316" class="headerlink" title="大型网站架构演化"></a>大型网站架构演化</h1><p><strong>1.大型网站软件系统的特点</strong></p>
<blockquote>
<p>高并发，大流量</p>
<p>高可用：7*24小时不间断服务</p>
<p>海量数据：储存、管理大量数据，需要大量服务器。</p>
<p>用户分布广泛，网络环境复杂</p>
<p>安全环境恶劣</p>
<p>需求快速变更，发布频繁</p>
<p>渐进式发展：不断运营、演化</p>
</blockquote>
<a id="more"></a>
<p><strong>2. 大型网站架构演化发展历程（10个进化阶段）</strong></p>
<p>1）初始阶段：小型网站一开始只需要<strong>一台服务器</strong>（承载应用程序、数据库、文件等资源），服务器操作系统用linux，应用程序用php开发，部署在Apache（web服务器）上，数据库用MySQL，统称“LAMP”技术。</p>
<p>2）第二阶段：应用服务与数据服务分离，整个网站使用<strong>三台服务器：应用服务器（cpu快而强大）、文件服务器（硬盘大）和数据库服务器（磁盘检索＋数据缓存）。</strong></p>
<p>3）第三阶段：使用缓存改善网站性能。内容的二八原则——把小部分频繁访问的数据缓存在内存（<strong>本地缓存于应用服务器内＋远程分布式缓存服务器</strong>内）中，减少数据库的访问压力。</p>
<p>4）第四阶段：使用<strong>应用服务器集群</strong>（负载均衡调度的多个应用服务器）改善网站的并发处理能力。</p>
<p>5）第五阶段：数据库读写分离（<strong>两台数据库服务器</strong>主从复制），在应用服务器端使用专门的数据访问摩卡。</p>
<p>6）第六阶段：使用<strong>反向代理和CDN</strong>，加速网站响应。</p>
<p>反向代理（部署在网站的中心机房，反向代理服务器缓存）和CDN（部署在网络提供商的机房，就近原则获取数据）基本原理都是缓存。</p>
<p>7）第七阶段：使用<strong>分布式文件系统和分布式数据库系统</strong>（业务分库）。</p>
<p>8）第八阶段：使用NoSQL（非关系数据库技术）和搜索引擎（非数据库查询技术），对可伸缩的分布式特性具有很好的支持。应用服务器通过一个统一数据访问模块访问各种数据。</p>
<p>9）第九阶段：业务拆分（将一个网站拆分成许多不同的应用，之间建立超链接）。</p>
<p>10）第十阶段：分布式服务（共用业务独立部署，可复用的业务连接数据库调用）。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwP6R3JibqULUSRicLGylkXWh83sH1Lv2yxE9UhFXgMCdibUkJWkY9UHEqQ/0?wx_fmt=png" alt=""></p>
<p><em>大型网站架构</em></p>
<p>趋势：技术方案产品化，按需购买，线性伸缩。</p>
<p>想清楚一个事情：技术是为业务服务的，业务架构的设计合理与否应该先于技术方案的考虑。</p>
<h1 id="u5927_u578B_u7F51_u7AD9_u67B6_u6784_u6A21_u5F0F"><a href="#u5927_u578B_u7F51_u7AD9_u67B6_u6784_u6A21_u5F0F" class="headerlink" title="大型网站架构模式"></a>大型网站架构模式</h1><ul>
<li><strong>网站架构模式</strong></li>
</ul>
<p>1）分层（横向切分）：企业应用系统的常见模式，分为应用层（负责具体业务和视图展示）、服务层（为应用层提供服务支持）、数据层（提供数据存储访问服务）。</p>
<p>2）分割（纵向切分）：业务分割，小粒度，独立部署。</p>
<p>3）分布式：分层和分割的目的是为了分布式部署。</p>
<p>4）集群：多台服务器部署相同应用构成一个集群，通过负载均衡设备共同对外提供服务。</p>
<p>5）缓存：缓存就是将数据存放在距离计算最近的位置以加快处理速度。前提：一，数据访问热点不均衡；二，数据不会很快过期。</p>
<p>CDN：内容分发网络，网络服务商。应用：视频网站和门户网站的热点内容。</p>
<p>反向代理：网站前端架构，缓存静态资源。</p>
<p>本地缓存：应用服务器本地的热点数据，无需访问数据库。</p>
<p>分布式缓存：应用程序通过网络通信访问缓存数据。</p>
<p>6）异步：将一个业务操作分成多个阶段，每个阶段之间通过共享数据的方式异步执行进行协作。</p>
<p>7）冗余：当某台服务器宕机时，可以将其上的服务和数据访问转移到其他机器上（热备份）。</p>
<p>8）自动化：发布自动化，自动化代码管理，自动化测试，自动化安全检测，自动化部署等。</p>
<p>9）安全：身份认证等手段。</p>
<ul>
<li><strong>案例：新浪微博的架构模式</strong></li>
</ul>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotw3EwcoutibfbbFeD2wRbVdDt5X8UrLkApUTseUuBCdZRaASicmN91fvEg/0?wx_fmt=png" alt=""></p>
<p><em>图片来源：<a href="http://timyang.net/architecture/weibo" target="_blank" rel="external">http://timyang.net/architecture/weibo</a></em></p>
<p>层次：3层，基础服务层——平台服务与应用服务层——API和新浪微博的业务层</p>
<p>好的设计绝对不是生搬硬套某个模式，而是在于对问题和需求是否真正理解与把握。</p>
<h1 id="u5927_u578B_u7F51_u7AD9_u6838_u5FC3_u67B6_u6784_u8981_u7D20"><a href="#u5927_u578B_u7F51_u7AD9_u6838_u5FC3_u67B6_u6784_u8981_u7D20" class="headerlink" title="大型网站核心架构要素"></a>大型网站核心架构要素</h1><p>架构就是“最高层次的规划，难以改变的决定”。</p>
<p><strong>1. 性能</strong></p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwtHCwqtAAW4ia2Oia6dGlHfXdSoBOYJia6HT48sqTMASticuqewBb71u2qw/0?wx_fmt=png" alt=""></p>
<p><em>用户视角的网站性能</em></p>
<p>衡量指标：响应时间、并发数（同时提交请求的用户数目）、吞吐量（单位时间内系统处理的请求数量）、系统性能计数器（服务器或操作系统性能的数据指标，包括系统负载、对象与线程数等）等。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwIVmyjW85b6WwN0MEDFetmsRWb2D5ibnPSmvhsdNY4esdgVRibR5icKjAA/0?wx_fmt=png" alt=""></p>
<p><em>性能测试曲线</em></p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwrsZtn3K1Niaqo4tntAX2BIkUZbpXia1CJKfzDSIL1ngK0VVt2Tnoxh3Q/0?wx_fmt=png" alt=""></p>
<p><em>并发用户访问响应时间曲线</em></p>
<p>影响到用户请求的所有环节都可以进行性能优化，如下：</p>
<p><strong>1）浏览器端：</strong></p>
<p>浏览器缓存、页面压缩、合理布局、减少cookie传输等手段改善性能；</p>
<p>i. 减少http请求：合并CSS、 JavaScript、合并图片。</p>
<p>ii. 使用浏览器缓存：通过设置HTTP头重的Cache-Control和Expires的属性，将静态素材文件缓存在浏览器中；更新这些资源时不要批量更新，而是逐步更新，并中间间隔时间。</p>
<p>iii. 启用压缩：减少传输数据量，但会对服务器和浏览器产生一定压力；</p>
<p>iiii. CSS放在页面最上面，JavaScript放在页面最下面（除了在页面解析时就需要用到JavaScript时）；</p>
<p>iiiii. 减少cookie传输：静态资源使用独立域名访问，避免请求静态资源时发送cookie。</p>
<p><strong>2）CDN（content distribute network）和反向代理</strong></p>
<p>CDN就是将网站静态内容（图片、文字、css、script脚本、静态网页等）分发至离用户最近的网络服务商机房，使用户通过最短访问路径获取数据。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwJ3XqoLQn8b4HQsA2JDajZ0nIGbBle92ciaIvgiaPtus9q6tYHr0tKa4g/0?wx_fmt=png" alt=""></p>
<p>利用反向代理的网站架构</p>
<p>反向代理：缓存静态内容+动态内容。用户请求——缓存在代理服务器上——直接返回。同时具有安全功能和负载均衡功能。</p>
<p>3）应用服务器端：使用服务器本地缓存和分布式缓存。</p>
<p>i. 分布式缓存：</p>
<blockquote>
<p>网站性能优化第一定律：优先考虑使用缓存优化性能。</p>
</blockquote>
<p>缓存的基本原理：讲数据存储在相对较高访问速度的存储介质中，以供系统处理。</p>
<p>缓存的本质：内存Hash表，数据缓存以一对Key, Value的形式存储在内存Hash表中。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwBSDVNotVDNgdiaWNnu6vtp0gicoP9scrXI3YLIa9KVmLdj8YMJ2g0xHw/0?wx_fmt=png" alt=""></p>
<p>使用缓存存取数据</p>
<p>分布式缓存架构：</p>
<p>JBoss Cache: 需更新同步的分布式缓存——企业应用系统中常见；</p>
<p>Memcached: 不互相通信的分布式缓存——大型网站。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwkzO07HIZ0uiau1Y2ELr95ga9f7l5zfMYLGLiaVqfvElchwQCEJiaJ4B2g/0?wx_fmt=png" alt=""></p>
<p>JBoss Cache: 需更新同步的分布式缓存</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwes8HEBy7ZrsRPRxttqNL1E21aPicM1cLhA3e4uaUmbLY6OIMuHAmYQQ/0?wx_fmt=png" alt=""></p>
<p>Memcached: 不互相通信的分布式缓存</p>
<p>ii. 异步操作：将用户请求发送至消息队列等待处理，而当前请求直接返回响应给用户。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwt96jQW12QMUydS24gA3Hia2lrGVc1zqToweia4KFc5OkVPicR66ObdGFw/0?wx_fmt=png" alt=""></p>
<p>使用消息队列消除并发访问高峰</p>
<p>iii. 使用集群：高并发访问场景下，使用负载均衡技术为一个应用构建一个由多台服务器组成的服务器集群，将并发访问请求分发到多台服务器上处理。</p>
<p>iiii. 代码优化：多线程、资源复用（单例、对象池）、数据结构、垃圾回收。</p>
<p>4）存储性能优化</p>
<p>i. 机械硬盘 vs. 固态硬盘</p>
<p>ii. B+树（传统关系数据库） vs. LSM树（NoSQL产品）</p>
<p>iii. RAID vs. HDFS</p>
<p>总结一句话：性能优化最终对于用户而言是一种主观感受，让他们觉得快是目的。</p>
<p><strong>2. 可用性(Availability)</strong></p>
<p>衡量指标：假设系统中多台服务器宕机、以及其他不可预期的问题时，系统整体依然可用。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotw8ePbeiaceY2UhicBzdSdOichia3BEKM1Ibsg7C3Q1fLiafUekYBickaaBYKw/0?wx_fmt=png" alt=""></p>
<p>分层后按模块分割的网站架构模型</p>
<p>应用层负责具体业务逻辑处理，服务层负责提供可复用的服务，数据层负责数据的存储和访问。</p>
<p>提高网站可用性的手段，如下：</p>
<p>1）冗余：应用部署在多台服务器上同时提供访问，数据存储在多台服务器上互相备份。</p>
<p>2）应用服务器端：负载均衡，集群，切换。</p>
<p>在集群环境下，Session管理主要有以下几种手段：</p>
<p>i. Session复制：不适用于大型网站（占用服务器和网络的大量资源，系统不堪负担）；</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwu6GGpzDDib2nh0mWraSXXWwibU6LFeHnuJPKNTNfzJhMokp2wwq26J8g/0?wx_fmt=png" alt=""></p>
<p>使用Session复制实现应用服务器共享Session</p>
<p>ii. Session绑定：也不符合大型网站的要求。</p>
<p>iii. 利用Cookie记录Session：</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwb1kbKzmDYiaIjTvt3ZTfYuJa57KkMhzFmQtHAnAeCB5icf8fljMosNUQ/0?wx_fmt=png" alt=""></p>
<p>利用Cookie记录Session信息</p>
<p>iiii. Session服务器</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwribb7YbQH3CdyS0fNeyMZv48UlwMjzG3icsicPEmIW4sXicCTFT6ibK9ghQ/0?wx_fmt=png" alt=""></p>
<p>利用Session服务器共享Session</p>
<p>将应用该服务器的状态分离，分为无状态的应用服务器和有状态的Session服务器。</p>
<p>3）高可用的服务：</p>
<p>i. 分级管理：</p>
<p>ii. 超时设置：</p>
<p>iii. 异步调用</p>
<p>iiii. 服务降级</p>
<p>iiiii. 幂等性设计</p>
<p>4）高可用的数据</p>
<p>含义：数据持久性、数据可访问性、分区耐受性（难以同时满足三个条件）</p>
<p>5）高可用网站的软件质量保证</p>
<p>6）网站运行监控：不允许没有监控的系统上线。</p>
<p>i. 监控数据采集：用户行为日志、业务运行数据、运维工程师和开发工程师使用的系统性能数据；</p>
<p>ii. 监控管理： 系统报警、失效转移、自动优雅降级（双11，淘宝关闭确认收货和评价功能）</p>
<p><strong>3. 伸缩性</strong></p>
<p>所谓伸缩性就是通过不断向集群中加入服务器的手段来缓解不断上升的用户并发访问压力和不断增长的数据存储需求，不需要改变网站的软硬件设计，仅仅通过改变部署的服务器数量就可以扩大或者缩小网站的服务处理能力。</p>
<blockquote>
<p>当一头牛拉不动车的时候，不要去寻找一头更强壮的牛，而是用两头牛来拉车。</p>
</blockquote>
<p>提升手段如下：</p>
<p>1）应用服务器集群：合适的负载均衡设备；</p>
<p>i. HTTP重定向负载均衡：并不多见；</p>
<p>ii. DNS域名解析负载均衡：支持基于地理位置的域名解析，加快用户访问速度。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotww8QDWS1FNIrKQEA40eDb1QyWib53d9rS3Z1kGIq19LaMZTwQSoPuubg/0?wx_fmt=png" alt=""></p>
<p>DNS域名解析负载均衡原理</p>
<p>iii. 反向代理负载均衡：</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwxx1cyFf9b2Wl29KNegPk26t9uzzvDic029tDSUJoOkbvOdbfDXmcA7g/0?wx_fmt=png" alt=""></p>
<p><em>反向代理负载均衡原理</em></p>
<p>iiii. IP负载均衡：吞吐量受限于负载均衡服务器网卡带宽。</p>
<p>iiiii. 数据链路层负载均衡：在通信协议的数据链层修改mac地址进行负载均衡——使用三角传输模式的链路层负载均衡是目前使用最广的一种负载均衡手段。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwBwMUHLg090ww6SgnHWPCMWCOgVBZ2ia0U5uBEpwLD2AX5zLznExUkWA/0?wx_fmt=png" alt=""></p>
<p>数据链路层负载均衡原理</p>
<p>2）分布式缓存服务器集群：改进缓存路由算法，保证缓存数据的可访问性；</p>
<p>（这部分内容非常专业，看了很多遍也没懂，以后再看看补充）</p>
<p>3）关系数据库集群：路由分区等手段；</p>
<p><strong>4. 扩展性</strong></p>
<p>主要关注网站的功能需求，快速响应新增业务的变化。核心思想：模块化。</p>
<p>低耦合的系统更容易扩展，低耦合的模块更容易复用。</p>
<p>提升手段如下：</p>
<p>1）事件驱动架构：利用消息队列实现；</p>
<p>2）分布式服务：将业务和可复用服务分离，通过分布式服务框架调用，新增的产品可以通过调用可复用的服务时限自身的业务逻辑，而对现有产品没有影响。</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwjbTzMMVUiaibLic2WQHd8BGTY74x2y3wZ3k1jTzQAPevDz3QAyxFlIjSQ/0?wx_fmt=png" alt=""></p>
<p>业务及模块拆分独立部署的分布式服务架构</p>
<p>3）开放平台接口：针对第三方开发者。</p>
<p><strong>5. 安全性</strong></p>
<p>衡量标准：对于潜在和现存的攻击和窃密，是否有可靠的应对策略。</p>
<hr>
<p>作者在最后介绍了架构师的职场攻略，他山之石，可以攻玉，产品经理也可以在自己的工作中借鉴：</p>
<ol>
<li>新人怎么做：新员工不要着急证明自己的能力和做出所谓的“成绩”，而是要和团队先达成一片，知道了水的深浅之后，再择机而动。</li>
</ol>
<p>就好比，做一个田野调查，公司也就是一个田野，很多时候，普遍的、先进的解决方法并不会适用于这个田野，你也不会知道谁是这个田野里的gate keeper, 所以往往难以调度。而只有go native之后，才可能因地制宜。</p>
<ol>
<li><p>如何寻求支持：寻找利益共同点，或者他人的利益点。</p>
</li>
<li><p>如何沟通：给上司做选择题，给下属做开放题。</p>
</li>
</ol>
<hr>
<p>附录：大型网站架构技术一览</p>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Riauqu6ia1AQFra9gUYv5xotwGwGZT6Wa2Mek2gnlm50WNsB87U98l7JHVQ1M1ia2zjHzcY20K4IqXiag/0?wx_fmt=png" alt=""></p>
<p>网站系统架构层次</p>
<ul>
<li>前端架构：前端指用户请求到达网站应用服务器之前经历的环节，通常不包含网站业务逻辑，不处理动态内容。</li>
</ul>
<p>1）浏览器优化技术：优化响应页面，加快加载和显示。</p>
<p>2）CDN：内容分发网络。</p>
<p>3）动静分离：静态资源，如JS、CSS等文件部署在专门的服务器集群上，和Web应用动态内容服务分离，并使用专门的（二级）域名。</p>
<p>4）图片服务：用户上传的图片。也应用独立部署的图片服务器集群，并使用二级域名。</p>
<p>5）反向代理：</p>
<p>6）DNS：</p>
<ul>
<li>应用层架构：应用层是处理网站主要业务逻辑的地方。</li>
</ul>
<p>1）开发框架：分离关注面，易于协作，内置安全策略等。</p>
<p>2）页面渲染：将分别开发维护的动态内容和静态页面模板集成起来，组合成最终的展示页面；</p>
<p>3）负载均衡：</p>
<p>4）Session管理：</p>
<p>5）动态页面静态化：</p>
<p>6）业务拆分：</p>
<p>7）虚拟化服务器。</p>
<ul>
<li>服务层架构：提供基础服务，供应用层调用，完成网站业务。</li>
</ul>
<p>分布式消息、分布式服务、分布式缓存、分布式配置。</p>
<ul>
<li>存储层架构：提供数据、文件的持久化存储访问和管理服务。</li>
</ul>
<p>1）分布式文件；</p>
<p>2）关系数据库：</p>
<p>3）NoSQL数据库：HBase;</p>
<p>4）数据同步。</p>
<ul>
<li>后台架构：后台非实时数据分析处理。</li>
</ul>
<p>1）搜索引擎；</p>
<p>2）数据仓库；</p>
<p>3）推荐系统。</p>
<p>作者的忠告：</p>
<p>不要企图设计大型网站，网站是演化出来的。</p>
<blockquote>
<p>书目名称：大型网站技术架构——核心原理与案例分析</p>
<p>作者：李智慧</p>
<p>出版社：电子工业出版社，2013年</p>
</blockquote>
<p><img src="http://mmbiz.qpic.cn/mmbiz/aqQVcYsU1Rh2wpYzr0Ps67raurD9PyPcTQvsq5TX3sGKf1iaX7rogBAqbHrqpnlEdU9gCPvVCYib3ic43PDYr6FicQ/0?wx_fmt=jpeg" alt=""></p>

      
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2016/01/13/大型网站技术架构/">大型网站技术架构</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 粽小喵 的个人博客">粽小喵</a></p>
        <p><span>发布时间:</span>2016年01月13日 - 21时17分</p>
        <p><span>最后更新:</span>2016年01月13日 - 21时32分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2016/01/13/大型网站技术架构/" title="大型网站技术架构">http://zongxiaomiao.com/2016/01/13/大型网站技术架构/</a>
            <span class="copy-path" data-clipboard-text="原文: http://zongxiaomiao.com/2016/01/13/大型网站技术架构/　　作者: 粽小喵" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/01/14/产品经理必知必会——产品策划全流程/">
                    产品经理必知必会——产品策划全流程
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/01/12/计算广告：互联网广告产品逻辑/">
                    计算广告：互联网广告产品逻辑
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#u5168_u4E66_u7ED3_u6784"><span class="toc-number">1.</span> <span class="toc-text">全书结构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u5927_u578B_u7F51_u7AD9_u67B6_u6784_u6F14_u5316"><span class="toc-number">2.</span> <span class="toc-text">大型网站架构演化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u5927_u578B_u7F51_u7AD9_u67B6_u6784_u6A21_u5F0F"><span class="toc-number">3.</span> <span class="toc-text">大型网站架构模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#u5927_u578B_u7F51_u7AD9_u6838_u5FC3_u67B6_u6784_u8981_u7D20"><span class="toc-number">4.</span> <span class="toc-text">大型网站核心架构要素</span></a></li></ol>
</div>
<style>
    .left-col .switch-btn {
        display: none;
    }
    .left-col .switch-area {
        display: none;
    }
</style>

<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }

    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
            $(".switch-btn, .switch-area").fadeOut(300);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
            $(".switch-btn, .switch-area").fadeIn(500);
        }
    })

    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
        $(".switch-btn, .switch-area").show();
    }
</script>




<div class="share">
    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more"></a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
    <a href="#" class="bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
    <a href="#" class="bds_copy" data-cmd="copy" title="复制网址"></a>
    <a href="#" class="bds_mail" data-cmd="mail" title="通过邮件分享"></a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
    </div>
    <script>
        window._bd_share_config={
            "common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>
</div>



    
      <div class="duoshuo" id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="2016/01/13/大型网站技术架构/" data-title="大型网站技术架构" data-url="http://zongxiaomiao.com/2016/01/13/大型网站技术架构/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"zongxiaomiao"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    <!-- 多说公共JS代码 end -->
</div>


    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/01/14/产品经理必知必会——产品策划全流程/" title="上一篇: 产品经理必知必会——产品策划全流程">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/01/12/计算广告：互联网广告产品逻辑/" title="下一篇: 计算广告：互联网广告产品逻辑">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/01/15/从零开始学Axure原型设计（高级篇）/">从零开始学Axure原型设计（高级篇）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/14/产品经理必知必会——产品策划全流程/">产品经理必知必会——产品策划全流程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/13/大型网站技术架构/">大型网站技术架构</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/12/计算广告：互联网广告产品逻辑/">计算广告：互联网广告产品逻辑</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/11/结网：成为伟大的产品经理前先成为最挑剔的用户/">结网：成为伟大的产品经理前先成为最挑剔的用户</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/10/从零开始学Axure（入门篇）/">从零开始学Axure（入门篇）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/10/从零开始学Axure原型设计（进阶篇）/">从零开始学Axure原型设计（进阶篇）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/09/社交红利带给我们什么？/">社交红利带给我们什么？</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/09/运用UML进行产品需求表达/">运用UML进行产品需求表达</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/09/推荐系统：网站如何发现用户所爱/">推荐系统：网站如何发现用户所爱</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/09/六个步骤做好产品需求/">六个步骤做好产品需求</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/09/2015-我的转型年/">2015,我的转型年</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/09/腾讯产品offer－从暑期实习生到产培生再到校招的坎坷之路/">腾讯产品offer－从暑期实习生到产培生再到校招的坎坷之路</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/08/什么是原型设计（简而言之版）/">什么是原型设计（简而言之版）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/08/从零开始学Sketch——进阶篇/">从零开始学Sketch——进阶篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/08/从零开始学Sketch——入门篇/">从零开始学Sketch——入门篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/07/我在香港的这半年/">我在香港的这半年</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/07/用户体验作为一种方法论/">用户体验作为一种方法论</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/07/关于需求的11个真相/">关于需求的11个真相</a></li></ul>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#toc, .switch-btn, .switch-area").toggle();
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
                $(".switch-btn, .switch-area").fadeToggle(300);
            }
        })
    </script>




    
        <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
        <script>
            var yiliaConfig = {
            fancybox: true,
            mathjax: true,
            animate: true,
            isHome: false,
            isPost: true,
            isArchive: false,
            isTag: false,
            isCategory: false,
            open_in_new: false
            }
        </script>
        
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 粽小喵
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的静态博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减双栏 Hexo 博客主题">Yelee</a> by MOxFIVE
            </div>
        </div>
        <div class="visit">
            <span id="busuanzi_container_site_pv" style='display:none'>
                <span id="site-visit" >本站到访数: 
                    <span id="busuanzi_value_site_uv"></span>
                </span>
            </span>
            <span id="busuanzi_container_page_pv" style='display:none'>
                <span id="page-visit">, 本页阅读量: 
                    <span id="busuanzi_value_page_pv"></span>
                </span>
            </span>
        </div>
    </div>
</footer>
    </div>
    

<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>


  </div>
  
 
</body>
</html>